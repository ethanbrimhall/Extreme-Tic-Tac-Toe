<html>
	<head>
		<style>
			.Square {
				width: 40px;
				height: 40px;
				text-align: center;
				font-size: 18pt;
				font-weight: bold;
				font-family: Verdana;
			}
            #table1{
                float: left;
                border-right: 5px solid black;
                border-bottom: 5px solid black;
            }
            #table2{
                float: left;
                border-right: 5px solid black;
                border-bottom: 5px solid black;
            }#table3{
                display: inline-block;
                border-bottom: 5px solid black;
            }#table4{
                float: left;
                border-right: 5px solid black;
                border-bottom: 5px solid black;
            }#table5{
                float: left;
                border-right: 5px solid black;
                border-bottom: 5px solid black;
            }#table6{
                display: inline-block;
                border-bottom: 5px solid black;
            }#table7{
                float: left;
                border-right: 5px solid black;
            }#table8{
                float: left;
                border-right: 5px solid black;
            }#table9{
                display: inline-block;
            }
            
		</style>
		
		<script>
		
        //Starts the game by clearing squares and setting variabbles
		function startGame() {
		
            //Clears each square in the board
			for (var i = 1; i <= 9; i = i + 1) {
				clearBox(i);
			}
            
            //50/50 chance for who goes first
			if (Math.random() < 0.5) {
				document.turn = "O";
			}else{
                document.turn = "X";
            }
            
            //Setting all variables equal to null, these variables correspond to each tic tac toe board and who won each; etc: winner1 = "X" means x won board #1
			document.winner1 = document.winner2 = document.winner3 = document.winner4 =document.winner5 =document.winner6 =document.winner7 = document.winner8 = document.winner9 = null;
            
            //Sets the message to tell the user which player goes first
			setMessage(document.turn + " you get to go first!");
		}
		
        //Sets the message to whatever is passed to it
		function setMessage(msg) {
			document.getElementById("message").innerText = msg;
		}
		
        //Called when a square is clicked by user, data passed is the square itself and which table it came from
		function nextMove(square) {
            if (square.innerText == "") {
                    square.innerText = document.turn;
                    switchTurn();
                } else {
                    setMessage("That square is already used.");
                }
		}
            
        
		//If there is 3 in a row and no winner for the table has been decalred, then winner is set for that table
		function switchTurn() {
			if (checkForWinner(document.turn, 1) && document.winner1 == null) {
                document.winner1 = document.turn;//Sets the winner for that table to either 'x' or 'o'
                drawShape(1, document.winner1);//Draws an 'x' or 'o' in every square in that table for the winner
                
			}else if(checkForWinner(document.turn, 2) && document.winner2 == null){
                document.winner2 = document.turn;
                drawShape(2, document.winner2);
                
            }else if(checkForWinner(document.turn, 3) && document.winner3 == null){
                document.winner3 = document.turn; 
                drawShape(3, document.winner3);
                
            }else if(checkForWinner(document.turn, 4) && document.winner4 == null){
                document.winner4 = document.turn; 
                drawShape(4, document.winner4);
                
            }else if(checkForWinner(document.turn, 5) && document.winner5 == null){
                document.winner5 = document.turn; 
                drawShape(5, document.winner5);
                
            }else if(checkForWinner(document.turn, 6) && document.winner6 == null){
                document.winner6 = document.turn; 
                drawShape(6, document.winner6);
                
            }else if(checkForWinner(document.turn, 7) && document.winner7 == null){
                document.winner7 = document.turn; 
                drawShape(7, document.winner7);
                
            }else if(checkForWinner(document.turn, 8) && document.winner8 == null){
                document.winner8 = document.turn;
                drawShape(8, document.winner8);
                
            }else if(checkForWinner(document.turn, 9) && document.winner9 == null){
                document.winner9 = document.turn; 
                drawShape(9, document.winner9);
            }
            
            //This check for three games won in a row, end of game if true
            if(checkForBigWinner(document.turn)){
                setMessage(document.turn + " wins the game!");
                document.getElementById("message").style.fontSize = "xx-large";
            }else{
                //No winner has been found so switch turns and wait for next move by user
                if(document.turn == "X") {
                    document.turn = "O";
                    setMessage("It's " + document.turn + "'s turn!");
                }else {
                    document.turn = "X";
                    setMessage("It's " + document.turn + "'s turn!");
                }
            }
        }
		//This checks for a winner in the tic tac toe boards
		function checkForWinner(move, num) {
			var result = false;
            //Below are all possible outcomes for three in a row
			if (checkRow(1, 2, 3, move, num) || 
				checkRow(4, 5, 6, move, num) ||
				checkRow(7, 8, 9, move, num) || 
				checkRow(1, 4, 7, move, num) ||
				checkRow(2, 5, 8, move, num) ||
				checkRow(3, 6, 9, move, num) ||
				checkRow(1, 5, 9, move, num) ||
				checkRow(3, 5, 7, move, num)) {
				
				result = true;//There is a three in a row
			}
			return result;//No three in a row, so return false
		}
		
        //Gets the value of each square in a row, called in checkForWinner() 9 times
		function checkRow(a, b, c, move, num) {
			var result = false;
            //Calls getBox() to get the value of the square
			if (getBox(a, num) == move && getBox(b, num) == move && getBox(c, num) == move) {
				result = true;//There is a three in a row so return true
			}
			return result;//No three in a row so return false
		}
		
        //Grabs the value of each square in the table, called in checkRow()
		function getBox(number, num) {
            if(num == 1){
                return document.getElementById("a" + number).innerText;
            }else if(num == 2){
                return document.getElementById("b" + number).innerText;
            }
            else if(num == 3){
                return document.getElementById("c" + number).innerText;
            }else if(num == 4){
                return document.getElementById("d" + number).innerText;
            }else if(num == 5){
                return document.getElementById("e" + number).innerText;
            }else if(num == 6){
                return document.getElementById("f" + number).innerText;
            }else if(num == 7){
                return document.getElementById("g" + number).innerText;
            }else if(num == 8){
                return document.getElementById("h" + number).innerText;
            }else if(num == 9){
                return document.getElementById("i" + number).innerText;
            }
			
		}
		
        //Clears every square in the board, called from function startgame() and loops 9 times to get each square
		function clearBox(number) {
			document.getElementById("a" + number).innerText = "";//'a' corresponds to table 1 in html
            document.getElementById("b" + number).innerText = "";
            document.getElementById("c" + number).innerText = "";
            document.getElementById("d" + number).innerText = "";
            document.getElementById("e" + number).innerText = "";
            document.getElementById("f" + number).innerText = "";
            document.getElementById("g" + number).innerText = "";
            document.getElementById("h" + number).innerText = "";
            document.getElementById("i" + number).innerText = "";
		}
        
        //Checks for a winner by checking if three games in a row have been won
        function checkForBigWinner(shape){
                if(document.winner1 == shape && document.winner2 == shape && document.winner3 == shape){
                    return true;
                }else if(document.winner4 == shape && document.winner5 == shape && document.winner6 == shape){
                    return true;
                }else if(document.winner7 == shape && document.winner8 == shape && document.winner9 == shape){
                    return true;
                }else if(document.winner1 == shape && document.winner4 == shape && document.winner7 == shape){
                    return true;
                }else if(document.winner2 == shape && document.winner5 == shape && document.winner8 == shape){
                    return true;
                }else if(document.winner3 == shape && document.winner6 == shape && document.winner9 == shape){
                    return true;
                }else if(document.winner1 == shape && document.winner5 == shape && document.winner9 == shape){
                    return true;
                }else if(document.winner3 == shape && document.winner5 == shape && document.winner7 == shape){
                    return true;
                }else{
                    return false;
                }
            }
            
        //Draw an 'x' or 'o' in every square to show the winner of the table
        function drawShape(num, shape){
            if(num == 1){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("a" + i).innerText = shape;
                }
            }else if(num == 2){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("b" + i).innerText = shape;
                }
            }else if(num == 3){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("c" + i).innerText = shape;
                }
            }else if(num == 4){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("d" + i).innerText = shape;
                }
            }else if(num == 5){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("e" + i).innerText = shape;
                }
            }else if(num == 6){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("f" + i).innerText = shape;
                }
            }else if(num == 7){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("g" + i).innerText = shape;
                }
            }else if(num == 8){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("h" + i).innerText = shape;
                }
            }else if(num == 9){
                for(var i = 1; i <= 9; i++){
                    document.getElementById("i" + i).innerText = shape;
                }
            }
        }
            
		
		</script>
		
	</head>

	<body onload="startGame();">
		<h1>Extreme Tic Tac Toe</h1>
		
		<div id="message">messages will go here</div>
        
		<table border="1" id = "table1">
			<tr>
				<td id="a1" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a2" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a3" class="Square" onclick="nextMove(this, 1);"></td>
			</tr>
			<tr>
				<td id="a4" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a5" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a6" class="Square" onclick="nextMove(this, 1);"></td>
			</tr>
			<tr>
				<td id="a7" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a8" class="Square" onclick="nextMove(this, 1);"></td>
				<td id="a9" class="Square" onclick="nextMove(this, 1);"></td>
			</tr>
		</table>
        <table border="1" id = "table2">
			<tr>
				<td id="b1" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b2" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b3" class="Square" onclick="nextMove(this, 2);"></td>
			</tr>
			<tr>
				<td id="b4" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b5" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b6" class="Square" onclick="nextMove(this, 2);"></td>
			</tr>
			<tr>
				<td id="b7" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b8" class="Square" onclick="nextMove(this, 2);"></td>
				<td id="b9" class="Square" onclick="nextMove(this, 2);"></td>
			</tr>
		</table>
        <table border="1" id = "table3">
			<tr>
				<td id="c1" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c2" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c3" class="Square" onclick="nextMove(this, 3);"></td>
			</tr>
			<tr>
				<td id="c4" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c5" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c6" class="Square" onclick="nextMove(this, 3);"></td>
			</tr>
			<tr>
				<td id="c7" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c8" class="Square" onclick="nextMove(this, 3);"></td>
				<td id="c9" class="Square" onclick="nextMove(this, 3);"></td>
			</tr>
		</table>
        <br/>
        <table border="1" id = "table4">
			<tr>
				<td id="d1" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d2" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d3" class="Square" onclick="nextMove(this, 4);"></td>
			</tr>
			<tr>
				<td id="d4" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d5" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d6" class="Square" onclick="nextMove(this, 4);"></td>
			</tr>
			<tr>
				<td id="d7" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d8" class="Square" onclick="nextMove(this, 4);"></td>
				<td id="d9" class="Square" onclick="nextMove(this, 4);"></td>
			</tr>
		</table>
        <table border="1" id = "table5">
			<tr>
				<td id="e1" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e2" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e3" class="Square" onclick="nextMove(this, 5);"></td>
			</tr>
			<tr>
				<td id="e4" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e5" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e6" class="Square" onclick="nextMove(this, 5);"></td>
			</tr>
			<tr>
				<td id="e7" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e8" class="Square" onclick="nextMove(this, 5);"></td>
				<td id="e9" class="Square" onclick="nextMove(this, 5);"></td>
			</tr>
		</table>
        <table border="1" id = "table6">
			<tr>
				<td id="f1" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f2" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f3" class="Square" onclick="nextMove(this, 6);"></td>
			</tr>
			<tr>
				<td id="f4" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f5" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f6" class="Square" onclick="nextMove(this, 6);"></td>
			</tr>
			<tr>
				<td id="f7" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f8" class="Square" onclick="nextMove(this, 6);"></td>
				<td id="f9" class="Square" onclick="nextMove(this, 6);"></td>
			</tr>
		</table>
        <br/>
        <table border="1" id = "table7">
			<tr>
				<td id="g1" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g2" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g3" class="Square" onclick="nextMove(this, 7);"></td>
			</tr>
			<tr>
				<td id="g4" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g5" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g6" class="Square" onclick="nextMove(this, 7);"></td>
			</tr>
			<tr>
				<td id="g7" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g8" class="Square" onclick="nextMove(this, 7);"></td>
				<td id="g9" class="Square" onclick="nextMove(this, 7);"></td>
			</tr>
		</table>
        <table border="1" id = "table8">
			<tr>
				<td id="h1" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h2" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h3" class="Square" onclick="nextMove(this, 8);"></td>
			</tr>
			<tr>
				<td id="h4" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h5" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h6" class="Square" onclick="nextMove(this, 8);"></td>
			</tr>
			<tr>
				<td id="h7" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h8" class="Square" onclick="nextMove(this, 8);"></td>
				<td id="h9" class="Square" onclick="nextMove(this, 8);"></td>
			</tr>
		</table>
        <table border="1" id = "table9">
			<tr>
				<td id="i1" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i2" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i3" class="Square" onclick="nextMove(this, 9);"></td>
			</tr>
			<tr>
				<td id="i4" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i5" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i6" class="Square" onclick="nextMove(this, 9);"></td>
			</tr>
			<tr>
				<td id="i7" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i8" class="Square" onclick="nextMove(this, 9);"></td>
				<td id="i9" class="Square" onclick="nextMove(this, 9);"></td>
			</tr>
		</table>
        <br/>
		<a href="javascript:startGame();">Start Over</a>
	</body>
</html>